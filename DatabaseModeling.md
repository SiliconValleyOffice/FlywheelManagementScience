# Introduction #

New instances of the FMM database will ALWAYS be created programatically by the FmmOpenHelper.onCreate() method.  This method understands the nuances of creating a new FMM instance, utilizing ddl from files stored in the res/raw directory.

## Model-driven DDL ##

No DDL will be authored by hand!

All database design and refactoring will be done using MySQL Workbench.  All DDL generation will be done by MySQL Workbench.

Change process:

  * modify the latest data model (database/model/fmm.mwb) from the svn repository
  * review changes with a collaborator
  * generate/update ddl into the assets/database/ddl/[database\_technology](database_technology.md) directory
  * create new FMM database instance for testing/validation

# DDL Files #

DDL generated by MySQL Workbench for each table will be stored in its own file(s) in the assets/database/ddl/[database\_technology](database_technology.md) directory.

DDL file names will be of the form `[java_class_name].ddl`

A DDL file will be generated for each database table, for each of the target database technologies.  This application currently supports MySQL and SQLite.

## Generating a DDL File for SQLite ##

  * open database/model/fmm.mwb with MySQL Workbench
  * right-click on the table and select "Copy SQL to Clipboard"
  * create file (if not exists) `[table_name].ddl`
  * paste SQL from MWB
  * cut string " IF NOT EXISTS `fmm`."
  * cut any other occurrences of "`fmm`."
  * cut any occurrences of " UNSIGNED"
  * cut any INDEX clauses
  * cut any ON DELETE or ON UPDATE clauses
  * delete "ENGINE" line
  * delete "COMMENT" line
  * append ";" to last line